@model IEnumerable<ChildCareSystem.Models.Patient>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="loader">
    <img src="https://firebasestorage.googleapis.com/v0/b/child-care-system-fa552.appspot.com/o/images%2Fcommon%2Floading.gif?alt=media&token=978f2ac3-edb1-4748-b9ed-34b93c9e1f31" alt="Loading..." />
</div>

<div class="wrapper">
    <div class="overlay-image overlay1 d-none d-lg-block d-xl-block">
        <img src="https://firebasestorage.googleapis.com/v0/b/child-care-system-fa552.appspot.com/o/images%2Fcommon%2Fimage7.svg?alt=media&token=8f891d0f-3975-427a-b8ed-aceb11f4236e" />
    </div>
    <div class="overlay-image overlay2 d-none d-lg-block d-xl-block">
        <img src="https://firebasestorage.googleapis.com/v0/b/child-care-system-fa552.appspot.com/o/images%2Fcommon%2Fundraw_doll_play_evbw.svg?alt=media&token=4b586009-9652-4fee-b8d1-a02451bda388" />
    </div>
    <div class="section-title my-3">
        <h2>Your patient</h2>
    </div>
    <div class="patient-wrapper row">
        @foreach (var item in Model)
        {
            <div class="patient-preview d-flex my-4 mx-3 col-12 col-lg-5 ">
                <div class="service-text my-3">
                    <div class="service-name px-3">
                        <h4>@item.PatientName</h4>
                    </div>
                    <div class="service-descript px-3">
                        <span class="text-secondary" style="font-weight: 700">Gender: </span>
                        @if (item.Gender)
                        {
                            <span>Male</span>
                        }
                        else
                        {
                            <span>Female</span>
                        }
                    </div>
                    <div class="service-descript px-3">
                        <span class="text-secondary" style="font-weight: 700">Birthdate: </span>@item.Birthdate.ToString("dd-MM-yyyy")
                    </div>
                    <div class="card-button mt-3 px-3">
                        <a class="btn btn-success button-card"
                           asp-action="Edit"
                           asp-route-id="@item.Id">
                            Edit
                        </a>
                        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">
                            Delete
                        </button>
                        @*<form asp-action="Delete" method="post">
                                <input type="hidden" value="@item.Id" name="id" />
                                <button class="btn btn-danger" type="submit">Delete</button>
                            </form>*@
                    </div>
                </div>
            </div>
            @* Confirm delete modal *@
            <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Delete patient</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            Are you sure to delete this patient?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <form asp-action="Delete" method="post">
                                <input type="hidden" value="@item.Id" name="id" />
                                <button class="btn btn-danger" type="submit">Delete</button>
                            </form>
                            @*<button type="button" class="btn btn-danger">Delete</button>*@
                        </div>
                    </div>
                </div>
            </div>
        }

    </div>
    <a asp-action="Create">Add new patient</a>
</div>
@if (!String.IsNullOrEmpty(ViewBag.MAX_PATIENT_ERROR))
{
    <div class="alert alert-danger" role="alert">
        @ViewBag.MAX_PATIENT_ERROR
    </div>
}



@section Styles {
    <link href="@Url.Content("~/css/patient/index.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/common/loading.css")" rel="stylesheet" type="text/css" />
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/loading.js"></script>
}